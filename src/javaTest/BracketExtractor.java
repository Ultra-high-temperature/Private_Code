package javaTest;

import com.alibaba.fastjson.JSON;

import java.util.HashMap;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import java.util.ArrayList;
import java.util.List;

public class BracketExtractor {

    static String s = "<summary>\n" +
            "# 上市公司财报对比分析报告：\n" +
            "**对比公司**：雷特科技 VS 力王股份\n" +
            "**摘要**：雷特科技展现智能控制领域技术溢价优势，力王股份陷低毛利扩张困局\n" +
            "\n" +
            "## 总结：技术壁垒决定盈利分化 \n" +
            "\n" +
            "**雷特科技**：\n" +
            "优势：毛利率50%构筑技术护城河，智能家居收入增速46%验证场景化战略\n" +
            "风险：物料业务毛利率骤降27个百分点，库存周转天数221天暴露供应链隐患\n" +
            "\n" +
            "**力王股份**：\n" +
            "危机：毛利率10%行业垫底，政府补助占净利润20%暴露盈利脆弱性\n" +
            "亮点：存货周转率4次展现制造效率，碱性电池19%毛利率守住基本盘\n" +
            "\n" +
            "未来胜负手：雷特需突破智能家居生态整合瓶颈，力王亟待完成锂电业务战略重组\n" +
            "</summary>\n" +
            "\n" +
            "## 盈利能力 - 雷特科技利润虹吸VS力王股份技术突围  \n" +
            "| 指标               | 雷特科技(2024)                | 力王股份(2024)                     |对比结论                |\n" +
            "|--------------------|-------------------|--------------------------|-------------------|\n" +
            "| 营业收入增长率   | 20%                          | 20%                          | 规模扩张并驾齐驱        |\n" +
            "| 毛利率%           | 50% (同比+1.49pct)            | 10% (同比-1.23pct)            | 技术溢价雷特碾压        |\n" +
            "| 归母净利润增长率 | 20%                          | -30%                         | 利润分化加剧           |\n" +
            "| 总资产净利率      | 10%                          | 0%                           | 资产效率维度碾压        |\n" +
            "\n" +
            "洞察：在智能硬件与新能源电池的赛道分野中，雷特科技凭借智能照明控制器50%的毛利率构筑技术护城河。反观力王股份，尽管营收增速持平，但10%的毛利率与锂电业务-12.66%的亏损（电子烟电池价格战冲击），暴露出\"规模不经济\"的财务黑洞。当技术溢价遭遇成本沉没，力王需警惕\"增收不增利\"的恶性循环，建议剥离低效锂电产能，聚焦碱性电池工艺升级；雷特则需防范高毛利诱惑下的研发投入稀释效应，在智能家居生态卡位战中保持战略定力。\n" +
            "\n" +
            "## 主营业务 - 雷特科技：智能家居高增VS物料隐忧 VS 力王股份：锂电失速VS碱性突围\n" +
            "| 指标       | 雷特科技(2024)                | 力王股份(2024)                       |对比结论                |\n" +
            "|----------|-------------------|--------------------------|-------------------|\n" +
            "| 智能家居收入增速 | 46.36%              | -                        | 高端市场突破        |\n" +
            "| LED控制器毛利率 | 50%                | -                        | 技术护城河显著      |\n" +
            "| 碱性电池毛利率 | -                   | 19% (同比-0.03pp)        | 成本控制临界        |\n" +
            "| 锂电收入跌幅   | -                   | -45.81%                  | 战略转型阵痛        |\n" +
            "\n" +
            "洞察：雷特科技智能家居46.36%的高增长验证场景化战略成功，但物料业务61.94%的成本增速与30.92%的毛利率形成死亡交叉，疑似滞销品堆积。力王股份在碱性电池领域勉强守住19%毛利率，但锂电业务因电子烟价格战陷入\"失血旋涡\"，45.81%的收入暴跌暴露过度依赖单一应用场景风险。当碱性电池的规模效应遭遇锂电的技术迭代断层，力王的结构性风险远大于雷特的局部失速。\n" +
            "\n" +
            "## 客户结构 - 雷特科技多元布局韧性VS力王股份客户集中隐忧  \n" +
            "| 指标               | 雷特科技(2024年报)                | 力王股份(2024年报)                     | 对比结论                |\n" +
            "|--------------------|---------------------------|--------------------------------|-------------------|\n" +
            "| 前五客户销售占比   | 22.51% (同比-8.68%)       | 31.19% (同比+5.09%)           | 雷特客户结构更优      |\n" +
            "| 境内收入增长率     | 14.22% (同比+3.48%)       | 0.05% (同比-3.23%)             | 本土市场韧性分化      |\n" +
            "\n" +
            "洞察：雷特科技前五客户占比仅22.51%且同比收缩，境内市场14.22%的稳健增长构筑起护城河，印证了\"不把鸡蛋放在一个篮子\"的生存智慧。力王股份的客户结构犹如\"单脚行走的巨人\"——前五大客户吞噬超三成营收，叠加境外收入暴涨53%却毛利率下滑0.41个百分点，暴露出大客户依赖与汇率波动双重风险。\n" +
            "\n" +
            "## 研发投入强度 - 雷特沉默成本VS力王未来押注\n" +
            "| 指标               | 雷特科技(2024年报)                | 力王股份(2024年报)                | 对比结论          |\n" +
            "|--------------------|----------------------------------|----------------------------------|------------------|\n" +
            "| 研发营收占比       | 10% (同比下降6.71%)             | 0% (突破历史新高)               | 投入策略分化      |\n" +
            "| 新增专利           | 10项 (含屏显/蓝牙技术专利)        | 6项 (含3项发明专利)              | 雷特质量占优      |\n" +
            "\n" +
            "洞察：雷特在营收增长14%时研发强度保持10%，其智能家居专利增量虽多，但需警惕研发投入的\"吸毒效应\"。力王0%的研发营收占比与锂电池业务45%的营收暴跌形成死亡交叉，暴露出创新转化效率黑洞。\n" +
            "\n" +
            "## 运营效率 - 雷特科技库存困局VS力王股份闪电周转  \n" +
            "| 指标               | 雷特科技(2024年)                | 力王股份(2024年)                     |对比结论                |\n" +
            "|--------------------|-------------------|--------------------------|-------------------|\n" +
            "| 存货周转率         | 1.2次             | 4.0次                    | 力王周转快3.3倍    |\n" +
            "| 应收账款周转率     | 84.9次            | 2.8次                    | 雷特回款效率碾压    |\n" +
            "\n" +
            "洞察：雷特科技84.9次的应收账款周转率堪称行业清流，但1.2次的存货周转率暴露其定制化产品导致的库存沉疴。力王股份4.0次的存货周转展现电池制造业的敏捷供应链，但2.8次的应收账款周转率揭示其大客户依赖下的账期黑洞。\n" +
            "\n" +
            "## 政府补助依赖度 - 雷特科技补助退潮VS力王股份政策红利依赖\n" +
            "| 指标               | 雷特科技(2024年度)                | 力王股份(2024年度)                     | 对比结论          |\n" +
            "|--------------------|-----------------------------------|----------------------------------------|-------------------|\n" +
            "| 补助占净利润比重   | 7.63%                             | 19.58%                                 | 力王依赖度翻倍    |\n" +
            "\n" +
            "洞察：力王股份的政府补助依赖度如同\"财务强心针\"，在净利润中占比近20%。反观雷特科技补助占比收缩至7.6%，但需警惕其补助结构从专项奖励转向常规补贴的含金量下降。";

    private static final Pattern SUMMARY_PATTERN = Pattern.compile("<summary>(.*?)</summary>", Pattern.DOTALL);

    public static void main(String[] args) {
//        HashMap<String, String> stringStringHashMap = new HashMap<>();
//        stringStringHashMap.put("12","1A");
//        stringStringHashMap.put("123","13");
//
//        String s = JSON.toJSONString(stringStringHashMap);
//        System.out.printf(s);

        String s1 = extractSummaryContent(s);
        System.out.printf(s1);

    }

    public static String extractSummaryContent(String input) {
        Matcher matcher = SUMMARY_PATTERN.matcher(input);
        if (matcher.find()){
            return matcher.group(1);
        }
        return "StringUtils.getEmpty()";
    }
}